(function(e,t){"use strict";var i={};i.analytics={VERSIONS:"3.4.5",GTIME:null,TYPE:1,SCRIPT_URI:["http://stadig.ifeng.com/page.js","http://stadig.ifeng.com/apstat.js","http://stadig.ifeng.com/dursta.js"],SCRIPT_OBJ:[],SWF_URI:"http://y1.ifengimg.com/20150127/flashCookieInterface.swf",PARAM:{ref:"",snapid:"",uid:"",sid:"",editor:"",hook:"",pagepara:"",uri:"",versions:"",browser:""},init:function(e){var t=i.analytics,n=location.hostname;if(-1===n.indexOf("ifeng.com")&&-1===n.indexOf("phoenixtv.com")){t.VERSIONS="x3.4.5"}t.PARAM.uri=e?e:"";t.process()},getParam:function(n){var a=i.analytics,r=[];var o,s,c,l,u,f,d,m,h;o=a.PARAM.ref=encodeURIComponent(i.analytics.Tools.referrer());s=a.PARAM.info=i.client.info.get()?encodeURIComponent(i.client.info.get()):"";c=a.PARAM.uid=n;l=a.PARAM.sid=a.Cookie.get("sid")?encodeURIComponent(a.Cookie.get("sid")):"";u=a.PARAM.editor=null!==t.getElementById("editor_name")?encodeURIComponent(t.getElementById("editor_name").innerHTML):"";f=a.PARAM.versions=a.VERSIONS;d=(new Date).getTime();m=a.PARAM.pagepara=typeof e["getStaPara"]==="function"?encodeURIComponent(e["getStaPara"]()):"";h=a.PARAM.ci=typeof e["getChannelInfo"]==="function"?encodeURIComponent(e["getChannelInfo"]()):"";r.push("uri="+(a.PARAM.uri?a.PARAM.uri:""));r.push("ref="+(o?o:""));r.push("snapid="+(s?s:""));r.push("uid="+(c?c:""));r.push("sid="+(l?l:""));r.push("editor="+(u?u:""));r.push("timestamp="+d);r.push("versions="+f);if(typeof e["sta_collection_time"]==="undefined"){r.push("ztime="+(d/1-(new Date).getTime()/1))}else{r.push("ztime="+(d/1-e["sta_collection_time"]/1))}if(m){r.push("pt="+m)}if(h){r.push("ci="+h)}return r.join("&")},process:function(){var n=i.analytics,a=n.Tools.domain(),r=n.Flash.FLASH_ID="ifengSwf_"+(new Date).getTime(),o="";if(n.Flash.isSupportFlash()){var s=t.getElementById("sta_collection");var c="";o=i.analytics.SWF_URI;if(!s){s=t.createElement("div");s.id="sta_collection";s.style.bottom="0px";s.style.left="0px";s.style.position="absolute";t.getElementById("sta_collection_new").parentNode.insertBefore(s,t.getElementById("sta_collection_new"))}if(t.all){c='<object id="'+r+'" name="'+r+'" width="1" height="1" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000">'+'<param name="allowScriptAccess" value="always" />'+'<param name="movie" value="'+o+'" />'+" </object>"}else{c='<embed id="'+r+'" name="'+r+'" width="1" height="1" src="'+o+'" type="application/x-shockwave-flash" allowScriptAccess="always"></embed>'}n.Flash.FLASH_TIME=(new Date).getTime();n.GTIME=setTimeout(function(){n.TYPE=2;n.gCallback(n.TYPE)},3e3);s.innerHTML=c}else{var l=n.Cookie,u="",f;o="";n.TYPE=0;if(l.isSupportCookie()){if(!l.get("userid")||l.get("userid")=="undefined"||l.get("userid")=="false"){l.set("userid",n.Tools.uid(),a);n.TYPE+="2"}else{n.TYPE+="3"}u="?"+n.getParam(l.get("userid")===""?n.Tools.uid():l.get("userid"))}else{n.TYPE+="0";u="?"+n.getParam(n.Tools.uid())}var d="&support="+n.TYPE;o=n.SCRIPT_URI[0]+u+d,f="script_"+(new Date).getTime()+"_0";n.SCRIPT_OBJ.push(f);n.Tools.append(n.Tools.script(o,f));n.PARAM.ref=encodeURIComponent(e.location.href.replace(/&/g,"|"))}},gCallback:function(){var t=i.analytics,n=t.Tools.domain(),a=t.Flash.FLASH_ID,r=t.Flash.get(a,"www.ifeng.com","uid");t.TYPE=arguments[0]?arguments[0]:1;clearTimeout(t.GTIME);e["analytics_sta_callback"]=function(){};if("string"===typeof r&&"undefined"===r||false===r){t.TYPE=false===r?3:t.TYPE;if(t.Cookie.isSupportCookie()){if(!t.Cookie.get("userid")||t.Cookie.get("userid")=="undefined"||t.Cookie.get("userid")=="false"){r=t.Tools.uid();t.Cookie.set("userid",r,n);t.TYPE+="2"}else{r=t.Cookie.get("userid");t.TYPE+="3"}}else{r=t.Tools.uid();t.TYPE+="0"}t.Flash.set(a,"www.ifeng.com","uid",r)}else{t.TYPE=1;r=t.Flash.get(a,"www.ifeng.com","uid");if(t.Cookie.isSupportCookie()){if(!t.Cookie.get("userid")||t.Cookie.get("userid")=="undefined"||t.Cookie.get("userid")=="false"){t.Cookie.set("userid",r,n);t.TYPE+="2"}else{t.TYPE+="3"}}else{t.TYPE+="0"}}var o="",s="?"+t.getParam(r),c="";var l=(new Date).getTime()/1-t.Flash.FLASH_TIME/1;var u="&ftime="+l+"&support="+t.TYPE;o=t.SCRIPT_URI[0]+s+u,c="script_"+(new Date).getTime()+"_0";t.SCRIPT_OBJ.push(c);t.Tools.append(t.Tools.script(o,c));t.PARAM.ref=encodeURIComponent(e.location.href.replace(/&/g,"|"))},hook:function(n,a){var r=i.analytics,o=[],s=null,c="",l="";for(var u in r.PARAM){if(u==="hook"){o.push(u+"="+(new Date).getTime());continue}if(u==="uri"){continue}if(u==="snapid"){continue}if(u==="info"){o.push("snapid="+r.PARAM[u]);continue}if(u==="pagepara"){if(r.PARAM["pagepara"]==="#"){continue}else{o.push("pt="+r.PARAM[u]);continue}}o.push(u+"="+r.PARAM[u])}o.push("timestamp="+(new Date).getTime());o.push("support="+r.TYPE);var f=0;if(r.SCRIPT_OBJ){for(f=0;f<r.SCRIPT_OBJ.length;f++){c=r.SCRIPT_OBJ[f];s=t.getElementById(c);i.analytics.Tools.remove(s)}r.SCRIPT_OBJ.length=0}l="?"+o.join("&")+(n?n:"");c="script_"+(new Date).getTime()+"_0";s=r.Tools.script(r.SCRIPT_URI[0]+l,c);r.SCRIPT_OBJ.push(c);r.Tools.append(s);r.PARAM.ref=encodeURIComponent(e.location.href.replace(/&/g,"|"));if("function"===typeof a){a()}}};i.analytics.Tools={referrer:function(){return t.referrer.replace(/&/g,"|")},iframe:function(){var e="";if(self!==top){try{e=t.referrer.replace(/&/g,"|")}catch(i){e="undefined"}}return e},domain:function(){var e=location.hostname,t=0,i=e.length;if(e.indexOf(".ifeng")!==-1){t=e.indexOf(".ifeng")}else if(e.indexOf(".phoenixtv")!==-1){t=e.indexOf(".phoenixtv")}else{return".ifeng.com"}return e.substring(t,i)},append:function(e){setTimeout(function(){if(!t.body){setTimeout(arguments["callee"],0)}else{t.body.insertBefore(e,t.body.firstChild)}},1)},remove:function(e){setTimeout(function(){e.parentNode.removeChild(e)},1)},script:function(e,i){var n=t.createElement("script");n.id=i;n.src=e;return n},uid:function(){var e=(new Date).getTime(),t,i,n;i=(Math.random()*2147483648|0).toString(36);n=Math.round(Math.random()*1e4);t=e+"_"+i+n;return t},hasPlugin:function(e){e=e.toLowerCase();for(var t=0;t<navigator.plugins.length;t++){if(navigator.plugins[t].name.toLowerCase().indexOf(e)>-1){return true}}},hasIEPlugin:function(e){try{new ActiveXObject(e);return true}catch(t){return false}},removeBlanks:function(e){var t="";for(var i=0;i<e.length;i++){var n=e.charAt(i);if(n!==" "){t+=n}}return t},addEvent:function(e,t,i){if(e.addEventListener){e.addEventListener(t,i,false)}else if(e.attachEvent){e.attachEvent("on"+t,i)}else{e["on"+t]=i}}};i.analytics.Cookie={IS_HAS_COOKIE:null,get:function(e){var n=i.analytics,a=t.cookie,r=n.Tools.removeBlanks(a),o=r.split(";");for(var s=0;s<o.length;s++){var c=o[s].split("=");if(c.length>1&&c[0]===e){return c[1]}}return""},set:function(t,i,n){var a=new Date;a.setTime(a.getTime()+360*24*60*60*1e3);e.document.cookie=t+"="+i+"; path=/; domain="+n+"; expires="+a.toGMTString()},remove:function(e,n){if(i.analytics.Flash.isSupportFlash()){t.cookie=e+"=; path=/; domain="+n+"; expires=Thu, 01-Jan-70 00:00:01 GMT";return false}return false},isSupportCookie:function(){var t=i.analytics.Cookie,n=t.IS_HAS_COOKIE;if(n===null){if(e.navigator.cookieEnabled){n=t.IS_HAS_COOKIE=true}}return n}};i.analytics.Flash={FLASH_ID:null,FLASH_TIME:null,IS_HAS_FLASH:null,LOCAL_OBJECT:null,get:function(e,t,n){var a=i.analytics.Flash;if(a.isSupportFlash()){if(a.isAvailable(e)){if(typeof a.LOCAL_OBJECT["ifengFlashCookieRead"]!=="undefined"&&a.LOCAL_OBJECT.ifengFlashCookieRead(t,n)){return a.LOCAL_OBJECT.ifengFlashCookieRead(t,n)}else{return false}}return false}return false},set:function(e,t,n,a){var r=i.analytics.Flash,o=false;if(r.isSupportFlash()){if(r.isAvailable(e)){if(typeof r.LOCAL_OBJECT["ifengFlashCookieRead"]!=="undefined"){r.LOCAL_OBJECT.ifengFlashCookieSet(t,n,a);o=true}}}return o},remove:function(e,t,n){var a=i.analytics.Flash,r=false;if(a.isSupportFlash()){if(a.isAvailable(e)){a.LOCAL_OBJECT.ifengFlashCookieDelete(t,n);r=true}}return r},clear:function(e,t){var n=i.analytics.Flash,a=false;if(n.isSupportFlash()){if(n.isAvailable(e)){n.LOCAL_OBJECT.ifengFlashCookieClear(t);a=true}}return a},getFlashObj:function(i){if(e.document[i]){return e.document[i]}else if(navigator.appName.indexOf("Microsoft")===-1){if(t.embeds&&t.embeds[i]){return t.embeds[i]}}else{return t.getElementById(i)}},isAvailable:function(e){var t=i.analytics.Flash,n=t.getFlashObj(e),a=true;a=n?true:false;t.LOCAL_OBJECT=a?n:null;return a},isSupportFlash:function(){var e=i.analytics,t=e.Flash.IS_HAS_FLASH;if(t===null){var n=e.Tools.hasPlugin("Shockwave Flash");if(!n){t=n=e.Tools.hasIEPlugin("ShockwaveFlash.ShockwaveFlash")}else{t=n}}return t}};i.client={};i.client.info={get:function(){try{var e=i.client;return e.device.get()+","+e.system.get()+","+e.browser.get()+","+e.screen.get()}catch(t){return""}}};i.client.screen={get:function(){var t="",i="";try{t=e.screen.width;i=e.screen.height}catch(n){return"unkonw"}return t+"*"+i}};i.client.system={get:function(){var e={},t="",i="Win",n=navigator.userAgent;try{t=navigator.platform;e.win=t.indexOf("Win")===0;e.mac=t.indexOf("Mac")===0;e.x11=t==="X11"||t.indexOf("Linux")===0;if(e.win){if(/Win(?:dows )?([^do]{2})\s?(\d+\.\d+)?/.test(n)){if(RegExp["$1"]==="NT"){switch(RegExp["$2"]){case"5.0":i="windows_"+"2000";break;case"5.1":i="windows_"+"XP";break;case"6.0":i="windows_"+"Vista";break;case"6.1":i="windows_"+"7";break;case"6.2":i="windows_"+"8";break;default:i="windows_"+"NT";break}}else if(RegExp["$1"]==="9x"){i="windows_"+"ME"}else if(n.match(/(Windows Phone)\s+([\d.]+)/)){i="WP_"+n.match(/(Windows Phone)\s+([\d.]+)/)[2]}else{i=RegExp["$1"]==="Ph"?"WP":"windows_"+RegExp["$2"]}}if(n.match(/(Android)\s+([\d.]+)/)){i="Android_"+n.match(/(Android)\s+([\d.]+)/)[2]}}else if(e.mac){i=n.match(/(iPad).*OS\s([\d_]+)/)||n.match(/(iPhone\sOS)\s([\d_]+)/)?"iOS":"Mac"}else if(e.x11){i=n.match(/(Android)\s+([\d.]+)/)?"Android_"+n.match(/(Android)\s+([\d.]+)/)[2]:"Linux"}else if(n.match(/Windows Phone/)){i="WP"}else if(n.match(/(iPad).*OS\s([\d_]+)/)||n.match(/(iPhone\sOS)\s([\d_]+)/)){i="iOS_"+(n.match(/(iPad).*OS\s([\d_]+)/)?n.match(/(iPad).*OS\s([\d_]+)/)[2]:n.match(/(iPhone\sOS)\s([\d_]+)/)[2])}else if(n.match(/(Android)\s+([\d.]+)/)){i="Android_"+n.match(/(Android)\s+([\d.]+)/)[2]}}catch(a){i="unkonw"}return i}};i.client.device={get:function(){var e="PC",t=navigator.userAgent;try{var i=t.match(/(iPad).*OS\s([\d_]+)/);var n=t.match(/(iPhone\sOS)\s([\d_]+)/);var a=t.match(/(Android)\s+([\d.]+)/);var r=t.match(/(Windows Phone)\s+([\d.]+)/);if(i){e="iPad"}if(n){e="iPhone"}if(a){if(!t.toLowerCase().match(/mobile/)){e="Pad"}else if(t.match(/chrome\/([\d.]+)/)&&t.toLowerCase().match(/mobile/)){e="Phone"}else if(t.toLowerCase().match(/firefox\/([\d.]+)/)&&t.toLowerCase().match(/mobile/)){e="Phone"}else{e="Phone"}}if(r){e="Phone"}}catch(o){e="unkonw"}return e}};i.client.browser={get:function(){var e=navigator.userAgent.toLowerCase();var t,i,n={};try{i=e.match(/(?:firefox|opera|safari|chrome|msie|micromessenger)[\/: ]([\d.]+)/);if(i){i=i[1]}else{i="0"}n={version:i,safari:/version.+safari/.test(e)||/safari[\/ ]+([\d.]+)/.test(e),chrome:/chrome\/([\d.]+)/.test(e)||/crios\/([\d.]+)/.test(e),firefox:/firefox/.test(e),ie:/msie/.test(e)||/trident/.test(e),opera:/opera/.test(e),uc:/ucbrowser\/([\d.]+)/.test(e),au:/maxthon/.test(e),lb:/lbbrowser/.test(e),qq:/qqbrowser/.test(e),sg:/se 2.+x/.test(e),wx:/micromessenger/.test(e)};t=n.version.split(".")[0];if(n.uc){t=e.match(/ucbrowser\/([\d.]+)/)[1]?e.match(/ucbrowser\/([\d.]+)/)[1]:t;return"UC_"+t}if(n.au){t=e.match(/maxthon\/([\d.]+)/)[1]?e.match(/maxthon\/([\d.]+)/)[1]:t;return"AU_"+t}if(n.lb){return"LB_"+t}if(n.qq){t=e.match(/qqbrowser\/([\d.]+)/)[1]?e.match(/qqbrowser\/([\d.]+)/)[1]:t;return"QQ_"+t}if(n.sg){return"SG_"+t}if(n.firefox){return"FF_"+t}if(n.opera){return"OP_"+t}if(n.chrome){return"CM_"+t}if(n.wx){return"WX_"+t}if(n.safari){if(e.match(/android/)){return"WK_"+e.match(/webkit\/([\d.]+)/)[1]}else{try{if(e.match(/(?:version)[\/: ]([\d.]+)/)){t=e.match(/(?:version)[\/: ]([\d.]+)/)[1]}}catch(a){}return"SF_"+t}}if(n.ie){if(e.indexOf("rv:11")>-1){t="11"}return"IE_"+t}}catch(r){return"unkonw"}return"unkonw"}};i.analytics.aptracker={APS:[],_buildParams:function(){var n=[],a="",r="",o=i.analytics;try{a=o.Cookie.get("prov");r=o.PARAM.uid}catch(s){}n.push("url="+encodeURIComponent(t.URL));n.push("ap="+this.APS.join("|"));n.push("ar="+a);n.push("cu="+r);n.push("pt="+o.PARAM["pagepara"]);if(typeof e["getChannelInfo"]==="function"){n.push("ci="+encodeURIComponent(e["getChannelInfo"]()))}n.push("version="+o.VERSIONS);return n.join("&")},add:function(e){this.APS.push(e)},collection:function(){if(this.APS.length===0){return false}var e=this._buildParams();var t=new Image;t.src=i.analytics.SCRIPT_URI[1]+"?"+e}};i.analytics.remain={start_time:0,timer:null,init:function(){var t=i.analytics,n=navigator.userAgent.toLocaleLowerCase().match(/(msie) ([\d.]+)/);t.remain.start_time=(new Date).getTime();t.Tools.addEvent(e,"beforeunload",function(){t.remain.send("end")});if(n&&n[1]==="msie"&&e.parseInt(n[2])<=8){t.Tools.addEvent(e,"focus",function(){t.remain.start_time=(new Date).getTime();t.remain.addBlurEventIE()});t.remain.addBlurEventIE()}else{t.Tools.addEvent(e,"focus",function(){t.remain.start_time=(new Date).getTime()});t.remain.addBlurEvent()}},addBlurEvent:function(){var t=i.analytics;t.Tools.addEvent(e,"blur",function(){t.remain.send("pause");t.remain.start_time=(new Date).getTime()})},addBlurEventIE:function(){var e=i.analytics;e.remain.timer&&clearInterval(e.remain.timer);e.remain.timer=setInterval(function(){if(!t.hasFocus()){clearInterval(e.remain.timer);e.remain.send("pause");e.remain.start_time=(new Date).getTime()}},500)},send:function(n){var a=i.analytics,r=[];r.push("action="+n);r.push("datatype=durtime");r.push("value="+e.parseInt(((new Date).getTime()-a.remain.start_time)/1e3));r.push("uri="+a.PARAM.uri);r.push("ref="+a.PARAM.ref);r.push("uid="+a.PARAM.uid);r.push("sid="+a.PARAM.sid);r.push("time="+(new Date).getTime());r.push("ci="+a.PARAM.ci);r.push("pt="+a.PARAM.pagepara);a.remain.start_time=(new Date).getTime();if(t.images){(new Image).src=a.SCRIPT_URI[2]+"?"+r.join("&");setTimeout(function(){},1e3);for(var o=0;o<1e6;o++){}}}};e.analytics=i.analytics.init;e.hook=i.analytics.hook;e.aptracker=i.analytics.aptracker;e.remain=i.analytics.remain.init;e.getFaParams=function(){return i.analytics.PARAM};e.analytics_sta_callback=function(){i.analytics.gCallback()}})(window,document);